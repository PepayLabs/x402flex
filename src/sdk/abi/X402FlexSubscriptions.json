{
  "contractName": "X402FlexSubscriptions",
  "sourceName": "src/x402FlexSubscriptions.sol",
  "abi": [
    {
      "type": "constructor",
      "inputs": [
        {
          "name": "_registry",
          "type": "address",
          "internalType": "contract IX402FlexRegistryView"
        },
        {
          "name": "_permit2",
          "type": "address",
          "internalType": "contract IPermit2AllowanceTransfer"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "DEFAULT_ADMIN_ROLE",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "SUB_ADMIN",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "cancel",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "cancelBySig",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "deadline",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "sig",
          "type": "bytes",
          "internalType": "bytes"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "charge",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "computeSubId",
      "inputs": [
        {
          "name": "payer",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "merchant",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "token",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "amount",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "startAt",
          "type": "uint64",
          "internalType": "uint64"
        },
        {
          "name": "cadenceKind",
          "type": "uint8",
          "internalType": "uint8"
        },
        {
          "name": "cadence",
          "type": "uint32",
          "internalType": "uint32"
        },
        {
          "name": "cancelWindow",
          "type": "uint32",
          "internalType": "uint32"
        },
        {
          "name": "maxPayments",
          "type": "uint16",
          "internalType": "uint16"
        },
        {
          "name": "pullMode",
          "type": "uint8",
          "internalType": "uint8"
        },
        {
          "name": "termsHash",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "salt",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "pure"
    },
    {
      "type": "function",
      "name": "createSubscriptionWithSig",
      "inputs": [
        {
          "name": "a",
          "type": "tuple",
          "internalType": "struct X402FlexSubscriptions.CreateSubArgs",
          "components": [
            {
              "name": "payer",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "merchant",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "token",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "amount",
              "type": "uint256",
              "internalType": "uint256"
            },
            {
              "name": "startAt",
              "type": "uint64",
              "internalType": "uint64"
            },
            {
              "name": "cadenceKind",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "cadence",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "cancelWindow",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "maxPayments",
              "type": "uint16",
              "internalType": "uint16"
            },
            {
              "name": "pullMode",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "termsHash",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "salt",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "deadline",
              "type": "uint256",
              "internalType": "uint256"
            }
          ]
        },
        {
          "name": "payerSig",
          "type": "bytes",
          "internalType": "bytes"
        }
      ],
      "outputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "createSubscriptionWithSigAndPermit2",
      "inputs": [
        {
          "name": "a",
          "type": "tuple",
          "internalType": "struct X402FlexSubscriptions.CreateSubArgs",
          "components": [
            {
              "name": "payer",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "merchant",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "token",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "amount",
              "type": "uint256",
              "internalType": "uint256"
            },
            {
              "name": "startAt",
              "type": "uint64",
              "internalType": "uint64"
            },
            {
              "name": "cadenceKind",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "cadence",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "cancelWindow",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "maxPayments",
              "type": "uint16",
              "internalType": "uint16"
            },
            {
              "name": "pullMode",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "termsHash",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "salt",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "deadline",
              "type": "uint256",
              "internalType": "uint256"
            }
          ]
        },
        {
          "name": "payerSig",
          "type": "bytes",
          "internalType": "bytes"
        },
        {
          "name": "permitSingle",
          "type": "tuple",
          "internalType": "struct IPermit2AllowanceTransfer.PermitSingle",
          "components": [
            {
              "name": "details",
              "type": "tuple",
              "internalType": "struct IPermit2AllowanceTransfer.PermitDetails",
              "components": [
                {
                  "name": "token",
                  "type": "address",
                  "internalType": "address"
                },
                {
                  "name": "amount",
                  "type": "uint160",
                  "internalType": "uint160"
                },
                {
                  "name": "expiration",
                  "type": "uint48",
                  "internalType": "uint48"
                },
                {
                  "name": "nonce",
                  "type": "uint48",
                  "internalType": "uint48"
                }
              ]
            },
            {
              "name": "spender",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "sigDeadline",
              "type": "uint256",
              "internalType": "uint256"
            }
          ]
        },
        {
          "name": "permitSig",
          "type": "bytes",
          "internalType": "bytes"
        }
      ],
      "outputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "createSubscriptionWithSigAndPermit2612",
      "inputs": [
        {
          "name": "a",
          "type": "tuple",
          "internalType": "struct X402FlexSubscriptions.CreateSubArgs",
          "components": [
            {
              "name": "payer",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "merchant",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "token",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "amount",
              "type": "uint256",
              "internalType": "uint256"
            },
            {
              "name": "startAt",
              "type": "uint64",
              "internalType": "uint64"
            },
            {
              "name": "cadenceKind",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "cadence",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "cancelWindow",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "maxPayments",
              "type": "uint16",
              "internalType": "uint16"
            },
            {
              "name": "pullMode",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "termsHash",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "salt",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "deadline",
              "type": "uint256",
              "internalType": "uint256"
            }
          ]
        },
        {
          "name": "payerSig",
          "type": "bytes",
          "internalType": "bytes"
        },
        {
          "name": "permitValue",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "permitDeadline",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "v",
          "type": "uint8",
          "internalType": "uint8"
        },
        {
          "name": "r",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "s",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "eip712Domain",
      "inputs": [],
      "outputs": [
        {
          "name": "fields",
          "type": "bytes1",
          "internalType": "bytes1"
        },
        {
          "name": "name",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "version",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "chainId",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "verifyingContract",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "salt",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "extensions",
          "type": "uint256[]",
          "internalType": "uint256[]"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "getRoleAdmin",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "getSubscription",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "tuple",
          "internalType": "struct X402FlexSubscriptions.Subscription",
          "components": [
            {
              "name": "payer",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "merchant",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "token",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "amount",
              "type": "uint96",
              "internalType": "uint96"
            },
            {
              "name": "nextChargeAt",
              "type": "uint64",
              "internalType": "uint64"
            },
            {
              "name": "lastChargedAt",
              "type": "uint64",
              "internalType": "uint64"
            },
            {
              "name": "cadence",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "cancelWindow",
              "type": "uint32",
              "internalType": "uint32"
            },
            {
              "name": "maxPayments",
              "type": "uint16",
              "internalType": "uint16"
            },
            {
              "name": "paymentsMade",
              "type": "uint16",
              "internalType": "uint16"
            },
            {
              "name": "status",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "cadenceKind",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "pullMode",
              "type": "uint8",
              "internalType": "uint8"
            },
            {
              "name": "termsHash",
              "type": "bytes32",
              "internalType": "bytes32"
            }
          ]
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "grantRole",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "account",
          "type": "address",
          "internalType": "address"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "hasRole",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "account",
          "type": "address",
          "internalType": "address"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "pause",
      "inputs": [],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "paused",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "permit2",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "address",
          "internalType": "contract IPermit2AllowanceTransfer"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "registry",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "address",
          "internalType": "contract IX402FlexRegistryView"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "renounceRole",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "callerConfirmation",
          "type": "address",
          "internalType": "address"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "rescueERC20",
      "inputs": [
        {
          "name": "token",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "to",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "amount",
          "type": "uint256",
          "internalType": "uint256"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "revokeRole",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "account",
          "type": "address",
          "internalType": "address"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "supportsInterface",
      "inputs": [
        {
          "name": "interfaceId",
          "type": "bytes4",
          "internalType": "bytes4"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "unpause",
      "inputs": [],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "event",
      "name": "EIP712DomainChanged",
      "inputs": [],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "Paused",
      "inputs": [
        {
          "name": "account",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "RoleAdminChanged",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "previousAdminRole",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "newAdminRole",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "RoleGranted",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "account",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        },
        {
          "name": "sender",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "RoleRevoked",
      "inputs": [
        {
          "name": "role",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "account",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        },
        {
          "name": "sender",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "SubscriptionCancelled",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "by",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        },
        {
          "name": "cancelledAt",
          "type": "uint64",
          "indexed": false,
          "internalType": "uint64"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "SubscriptionCharged",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "paymentId",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "paymentNumber",
          "type": "uint16",
          "indexed": false,
          "internalType": "uint16"
        },
        {
          "name": "payer",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        },
        {
          "name": "merchant",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        },
        {
          "name": "token",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        },
        {
          "name": "amount",
          "type": "uint256",
          "indexed": false,
          "internalType": "uint256"
        },
        {
          "name": "feeAmount",
          "type": "uint256",
          "indexed": false,
          "internalType": "uint256"
        },
        {
          "name": "caller",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        },
        {
          "name": "chargedAt",
          "type": "uint64",
          "indexed": false,
          "internalType": "uint64"
        },
        {
          "name": "nextChargeAt",
          "type": "uint64",
          "indexed": false,
          "internalType": "uint64"
        },
        {
          "name": "termsHash",
          "type": "bytes32",
          "indexed": false,
          "internalType": "bytes32"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "SubscriptionCreated",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "termsHash",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "payer",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        },
        {
          "name": "merchant",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        },
        {
          "name": "token",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        },
        {
          "name": "amount",
          "type": "uint256",
          "indexed": false,
          "internalType": "uint256"
        },
        {
          "name": "startAt",
          "type": "uint64",
          "indexed": false,
          "internalType": "uint64"
        },
        {
          "name": "cadenceKind",
          "type": "uint8",
          "indexed": false,
          "internalType": "uint8"
        },
        {
          "name": "cadence",
          "type": "uint32",
          "indexed": false,
          "internalType": "uint32"
        },
        {
          "name": "cancelWindow",
          "type": "uint32",
          "indexed": false,
          "internalType": "uint32"
        },
        {
          "name": "maxPayments",
          "type": "uint16",
          "indexed": false,
          "internalType": "uint16"
        },
        {
          "name": "pullMode",
          "type": "uint8",
          "indexed": false,
          "internalType": "uint8"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "Unpaused",
      "inputs": [
        {
          "name": "account",
          "type": "address",
          "indexed": false,
          "internalType": "address"
        }
      ],
      "anonymous": false
    },
    {
      "type": "error",
      "name": "AccessControlBadConfirmation",
      "inputs": []
    },
    {
      "type": "error",
      "name": "AccessControlUnauthorizedAccount",
      "inputs": [
        {
          "name": "account",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "neededRole",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "AddressEmptyCode",
      "inputs": [
        {
          "name": "target",
          "type": "address",
          "internalType": "address"
        }
      ]
    },
    {
      "type": "error",
      "name": "AddressInsufficientBalance",
      "inputs": [
        {
          "name": "account",
          "type": "address",
          "internalType": "address"
        }
      ]
    },
    {
      "type": "error",
      "name": "EnforcedPause",
      "inputs": []
    },
    {
      "type": "error",
      "name": "ExpectedPause",
      "inputs": []
    },
    {
      "type": "error",
      "name": "FailedInnerCall",
      "inputs": []
    },
    {
      "type": "error",
      "name": "InvalidShortString",
      "inputs": []
    },
    {
      "type": "error",
      "name": "ReentrancyGuardReentrantCall",
      "inputs": []
    },
    {
      "type": "error",
      "name": "SafeERC20FailedOperation",
      "inputs": [
        {
          "name": "token",
          "type": "address",
          "internalType": "address"
        }
      ]
    },
    {
      "type": "error",
      "name": "StringTooLong",
      "inputs": [
        {
          "name": "str",
          "type": "string",
          "internalType": "string"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubAmountTooLarge",
      "inputs": [
        {
          "name": "amount",
          "type": "uint256",
          "internalType": "uint256"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubBadParams",
      "inputs": []
    },
    {
      "type": "error",
      "name": "SubBadSig",
      "inputs": []
    },
    {
      "type": "error",
      "name": "SubCancelTooLate",
      "inputs": [
        {
          "name": "cutoff",
          "type": "uint64",
          "internalType": "uint64"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubCancelled",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubCompleted",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubExists",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubNotDue",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "nextChargeAt",
          "type": "uint64",
          "internalType": "uint64"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubSigExpired",
      "inputs": [
        {
          "name": "deadline",
          "type": "uint256",
          "internalType": "uint256"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubUnknown",
      "inputs": [
        {
          "name": "subId",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "SubUnsupportedToken",
      "inputs": [
        {
          "name": "token",
          "type": "address",
          "internalType": "address"
        }
      ]
    }
  ]
}
